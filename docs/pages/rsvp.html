<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RSVP – Unsere Hochzeit</title>

  <!-- Farbvariablen und Basis‑Styles -->
  <link rel="stylesheet" href="../../css/variables.css">
  <link rel="stylesheet" href="../../css/basic.css">
  <!-- Spezifisches Styling für RSVP -->
  <link rel="stylesheet" href="../../css/rsvp.css">

  <!-- jQuery (für Header/Footer‑Include) -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="../../js/includeTemplate.js"></script>

  <!-- Firebase‑SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

  <script>
    // Deine Firebase‑Konfiguration (aus Firebase‑Console kopieren)
    const firebaseConfig = {
  apiKey: "AIzaSyBghkLs0tkWZjdMQC9RvDT8DmC5J-uXpEc",
  authDomain: "hochzeiteduardjoanne.firebaseapp.com",
  projectId: "hochzeiteduardjoanne",
  storageBucket: "hochzeiteduardjoanne.firebasestorage.app",
  messagingSenderId: "209565556740",
  appId: "1:209565556740:web:1a227bfce08bf5dca2d551"
};
    // Firebase initialisieren
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
  </script>
</head>
<body>
  <!-- Header-Include -->
  <div id="header"></div>

  <!-- RSVP-Sektion -->
<section class="rsvp-section">
  <h2>Zur Zusage</h2>
  <form class="rsvp-form" action="#" method="post">
    <!-- Name, E‑Mail, Teilnahme, Gäste … wie gehabt -->

    <div class="form-group">
      <label for="guests">Begleitpersonen</label>
      <input type="number" id="guests" name="guests" min="0" max="5" value="0">
    </div>

    <!-- NEU: Unverträglichkeiten -->
    <div class="form-group">
      <label for="intolerances">Unverträglichkeiten</label>
      <textarea
        id="intolerances"
        name="intolerances"
        rows="2"
        placeholder="z. B. Gluten, Laktose, Nüsse…"
      ></textarea>
    </div>

    <div class="form-group">
      <label for="message">Nachricht</label>
      <textarea id="message" name="message" rows="4"></textarea>
    </div>

    <button type="submit" class="btn">Absenden</button>
  </form>
</section>

<!-- Firebase‑Submit‑Handler -->
<script>
  document.querySelector('.rsvp-form').addEventListener('submit', async e => {
    e.preventDefault();
    const data = {
      name:           e.target.name.value.trim(),
      email:          e.target.email.value.trim(),
      attending:      e.target.attending.value,
      guests:         parseInt(e.target.guests.value) || 0,
      intolerances:   e.target.intolerances.value.trim(),  
      message:        e.target.message.value.trim(),
      timestamp:      firebase.firestore.FieldValue.serverTimestamp()
    };
    try {
      await db.collection('rsvps').add(data);
      alert('Vielen Dank für deine Zusage!');
      e.target.reset();
    } catch(error) {
      console.error('Fehler beim Absenden:', error);
      alert('Beim Absenden ist leider ein Fehler aufgetreten. Bitte versuche es später erneut.');
    }
  });
</script>

  <!-- Footer-Include -->
  <div id="footer"></div>
</body>
</html>
